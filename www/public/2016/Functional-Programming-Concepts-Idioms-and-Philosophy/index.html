<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Functional Programming: Concepts, Idioms and Philosophy | Thoughts on Code</title>
<meta name="keywords" content="functional programming, python, scala, java">
<meta name="description" content="Functional Programming has risen as a solution to most modern days problems, such as concurrency and scaling. For some, it is a mystique concept that applies only to Erlang, Haskell and other strange languages that are either too complicated or irrelevant. This is simply not true, and I&rsquo;m going to show how to apply some functional programming concepts on non-functional languages.
I&rsquo;ll deconstruct the functional paradigm by first defining what &lsquo;Functional Programming&rsquo; really means, then explaining common idioms and comparing the syntax.
In the end, I&rsquo;ll show how to make relevant changes to non-functional in order to follow the Functional Programming Philosophy.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/2016/Functional-Programming-Concepts-Idioms-and-Philosophy/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2016/Functional-Programming-Concepts-Idioms-and-Philosophy/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Thoughts on Code (Alt + H)">Thoughts on Code</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Functional Programming: Concepts, Idioms and Philosophy
    </h1>
    <div class="post-meta"><span title='2016-03-19 10:06:00 +0000 UTC'>March 19, 2016</span>

</div>
  </header> 
  <div class="post-content"><p><a href="https://en.wikipedia.org/wiki/Functional_programming">Functional Programming</a> has risen as a solution to most modern days problems, such as concurrency and scaling. For some, it is a mystique concept that applies only to Erlang, Haskell and other strange languages that are either too complicated or irrelevant. This is simply not true, and I&rsquo;m going to show how to apply some functional programming concepts on non-functional languages.</p>
<p>I&rsquo;ll deconstruct the functional paradigm by first defining what &lsquo;Functional Programming&rsquo; really means, then explaining common idioms and comparing the syntax.
In the end, I&rsquo;ll show how to make relevant changes to non-functional in order to follow the Functional Programming Philosophy.</p>
<p>Please note that this post is mostly intended to those who never programmed functionally before and the goal here is to present Functional Programming as a practice not strict to language features, but as a philosophy that can, to some extent, be followed in any languages, enhancing code safety and bringing some of the advantages of FP to non-functional languages.</p>
<h2 id="defining-functional-programming">Defining &lsquo;Functional Programming&rsquo;<a hidden class="anchor" aria-hidden="true" href="#defining-functional-programming">#</a></h2>
<p>The simplest definition of Functional Programming is <a href="http://www.sitepoint.com/functional-programming-pure-functions/">pure functions</a> (or even simpler, <em>deterministic functions</em>).</p>
<p>This, on the other hand, can have several meanings and have to be carefully analyzed. It also leads to several other important rules to FP, such as immutable variables and composable functions.</p>
<h3 id="deterministic-functions">Deterministic Functions<a hidden class="anchor" aria-hidden="true" href="#deterministic-functions">#</a></h3>
<p>As a general rule, think of your code as if you were writing a mathematical function:</p>
<ul>
<li>Should its result vary according to anything that isn&rsquo;t supplied as a parameter? No</li>
<li>Should it alter any of the parameters that were supplied? No</li>
<li>Should it alter anything outside its scope? No</li>
<li>Should the result be always the same for the same supplied parameters? <strong>Yes.</strong></li>
</ul>
<p>If, as you read this, you remembered a code that doesn&rsquo;t conform, I&rsquo;m afraid it wasn&rsquo;t functional. Why?</p>
<p>Functions have a special meaning on those languages, such that they are <strong>first class citizens</strong>. They can be passed around as &lsquo;variables&rsquo; and can be partially applied to compose new functionalities. I&rsquo;ll talk more about this later when I&rsquo;ll describe some idioms. The thing to have in mind here is that <strong>functions are designed to be reusable and composable.</strong> Any side effect or external interference will make functions unpredictable and hardly reusable.</p>
<h3 id="immutable-values">Immutable Values<a hidden class="anchor" aria-hidden="true" href="#immutable-values">#</a></h3>
<p>Stateful systems are very difficult to parallelize, having to implement mutexes, locks, semaphores and other forms of <strong>access constraints</strong> to make the code safer. FP simply bashes the concept of mutability; instead, when coding in a functional language, you compose functions to obtain the values you need.</p>
<p>This is one of the concepts that are most difficult to picture, coming from a non-functional language. The good thing about it is that immutability forces you to rethink your problems in order to have a (functionally) correct solution for the problem. This should not be a problem once you understand that Functional Programming is much more <strong>about how you design your functions than about how you design your data</strong>.</p>
<p>Values, after all, a logical abstraction of your data, while functions are a logical abstraction of your business.</p>
<h2 id="some-idioms-not-quite-familiar">Some Idioms not Quite Familiar<a hidden class="anchor" aria-hidden="true" href="#some-idioms-not-quite-familiar">#</a></h2>
<p>Coming from OO to FP might be complicated if you have never seen a FP source code and how it looks like. You&rsquo;ll probably not be seeing the <code>for</code> and <code>if</code> commands you are used to, but instead, <code>map</code>, <code>reduce</code>, <code>filter</code> and <code>flatten</code>. You&rsquo;ll learn of the (not so complicated) <a href="https://en.wikipedia.org/wiki/Monad_%28functional_programming%29">Monads</a>, Functors and <a href="http://io.pellucid.com/blog/abstract-algebraic-data-type">Algebraic Data Types</a>. What is all that supposed to mean and why can&rsquo;t the old structures be used?</p>
<p>I&rsquo;ll be using the <a href="http://www.scala-lang.org/">scala</a> names for the idioms presented here, but they are all the same in functional languages.</p>
<h3 id="monads-functors-and-friends">Monads, Functors and Friends<a hidden class="anchor" aria-hidden="true" href="#monads-functors-and-friends">#</a></h3>
<p>Monads are <a href="http://maciejpirog.github.io/fishy/">amazingly simple</a> with amazingly complicated rules. Monads are containers. Period. There are rules that regulate how Monads work and interact with other Monads and this rules also define terms such as Functors, Monoids, Applicative Functors and other extraneous terms to those who never programmed in functional languages. For the sake of simplicity, I&rsquo;ll group them here as simply &lsquo;Monad&rsquo;, taking the risk of being semantically wrong to make you understand the concept. I promise I&rsquo;ll disambiguate this later, ok?</p>
<p>Let me show you some scala code to illustrate what this means:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> someComputation<span style="color:#f92672">()</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Option</span><span style="color:#f92672">[</span><span style="color:#66d9ef">String</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> myPossibleString <span style="color:#66d9ef">=</span> someComputation<span style="color:#f92672">()</span>
</span></span></code></pre></div><p>Imagine, for example, that you can either have a value (in this example, a <code>String</code>) or not, as a result of some computation. Instead of the good ol&rsquo; <code>null</code>, which can lead to serious problems such as the not-so-good ol&rsquo; <code>NullPointerException</code>, you can return a <code>Option[String]</code>. An <code>Option</code> is a Monad that scala provides which wraps your data that allows you to safely interact with it <strong>only if it exists</strong>.</p>
<p>In a java code, you&rsquo;d check for <code>null</code> before doing anything to avoid a NPE:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String myPossibleString <span style="color:#f92672">=</span> someComputation();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(myPossibleString <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//Short circuit out</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> myPossibleString.<span style="color:#a6e22e">toUpper</span>();
</span></span></code></pre></div><p>In a functional programming language, you can <code>map</code> over the Monad to achieve the same safety level:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>myPossibleString<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span><span style="color:#66d9ef">_</span><span style="color:#f92672">.</span>toUpper<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>The only difference here is that the java code will return a <code>String</code>, while the scala code will return an <code>Option[String]</code>.</p>
<p>By mapping a monad, we transform the cointained value while keeping the same container. The result of this can be either:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#a6e22e">Some</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;MYUPPERSTRING&#34;</span><span style="color:#f92672">)</span> <span style="color:#75715e">// if the computation was successful
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">None</span> <span style="color:#75715e">// if the computation was unsuccessful
</span></span></span></code></pre></div><p>Note that <code>_.toUpper</code> won&rsquo;t break if <code>None</code> was supplied. This allows chaining operations on a value without having to short circuit all the possible problems:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String myStr <span style="color:#f92672">=</span> someComputation();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(myStr <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>myStr <span style="color:#f92672">=</span> newOperationOnStr(str);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(myStr <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> myStr.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> 3) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>matchRegex(str)) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This code can be written as the following in scala, using <code>Option[String]</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span>someComputation<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>newOperationOnStr<span style="color:#f92672">(</span><span style="color:#66d9ef">_</span><span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>filter<span style="color:#f92672">(</span>s <span style="color:#66d9ef">=&gt;</span> s<span style="color:#f92672">.</span>length <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">&amp;&amp;</span> matchRegex<span style="color:#f92672">(</span>s<span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.</span>isDefined
</span></span></code></pre></div><p>I could spend several hours here writing about how monads allow you to express your code better, in a functional way, but I&rsquo;ll leave that up to you.</p>
<h3 id="algebraic-data-what">Algebraic Data What?<a hidden class="anchor" aria-hidden="true" href="#algebraic-data-what">#</a></h3>
<p>There is a complete mathematical theory backing this kind of data, but I&rsquo;ll humbly limit myself to explaining that algebraic data types are meaningful, composite types. An algebraic data type defined <em>by the sum of all definitions of its forms</em>. Some monads are defined as algebraic data types, such as scala <code>Options</code> we&rsquo;ve seen before. It can be either <code>Some</code> or <code>None</code>. Each of those have different behaviors when mapped, filtered and reduced.</p>
<p>This means that while monads provide laws to data containers, algebraic data types provide <strong>form</strong> and <strong>meaning</strong>. <code>Try</code> and <code>Option</code> are both quite similar in terms of API and can behave quite similarly, but what differs both is that you&rsquo;ll want to use <code>Try</code> when the error can be meaningful or several kinds of errors can be thrown, each requiring different actions. You can also use <code>Either</code>, if you must deal with two possible outcomes for a function. The range of monadic algebraic types is immense and they help you to structure your application without heavy, imperative concepts.</p>
<p>In general, using this kind of abstractions lead to a cleaner, meaningful code. Personally, I consider this kind of abstraction to be much higher and more valuable than Object Oriented programming. Of course OO has its value, but its much easier to express logic algebraic data structures.</p>
<h2 id="but-how-can-i-start-using-it">But how can I start using it?<a hidden class="anchor" aria-hidden="true" href="#but-how-can-i-start-using-it">#</a></h2>
<p>While some languages provide native idioms to allow you write code aligned with the Functional Philosophy, there are several concepts that can be ported to non-functional (or natively non-functional) languages. It is important to note that writing code in a functional language doesn&rsquo;t make it immediately functional. What makes a code truly functional is the usage of aforementioned concepts. The same way you can have OO code in scala, you can have functional code in python, for example.</p>
<p>Imagine such situation, replacing the dummy functions with actual stuff:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>my_value <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fetch_values</span>():
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Imagine that you&#39;re fetching a real data</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># I&#39;ll return a dummy list of dummy ints</span>
</span></span><span style="display:flex;"><span>  my_value <span style="color:#f92672">=</span> [<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">filter_values</span>(even<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>  t <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> my_value:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> even:
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        t<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        t<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>  my_value <span style="color:#f92672">=</span> t
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_value</span>(x):
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Also dummy here.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> x <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_all_values</span>():
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> my_value:
</span></span><span style="display:flex;"><span>    process_value(x)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">do_process</span>():
</span></span><span style="display:flex;"><span>  fetch_values()
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># We (for some reason) need to process evens before odds</span>
</span></span><span style="display:flex;"><span>  filter_values(true)
</span></span><span style="display:flex;"><span>  process_all_values()
</span></span><span style="display:flex;"><span>  fetch_values()
</span></span><span style="display:flex;"><span>  filter_values(false)
</span></span><span style="display:flex;"><span>  process_all_values()
</span></span></code></pre></div><p>I broke all possible laws to make the example easier to transport. Hopefully, you&rsquo;ll be able to recognize some of the anti-patterns above on real, production code. We want to take them out. Below, I&rsquo;ll write a python code that fixes all of the above anti-patterns, but try to find them and imagine a functional approach before actually reading the transformed version.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> functools <span style="color:#f92672">import</span> reduce
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fetch_values</span>():
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">partition_values</span>(vals):
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> reduce(<span style="color:#66d9ef">lambda</span> l, v: l[v <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>append(v) <span style="color:#f92672">or</span> l, vals, ([], []))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_value</span>(x):
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Processing here is a pure function.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> x <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_all_values</span>(lst):
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Be cautious when plumbing functions here;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># You should only map over pure functions, to avoid</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># intermittent state or unhandled errors.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> map(process_value, lst)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">do_process</span>():
</span></span><span style="display:flex;"><span>  id_list <span style="color:#f92672">=</span> fetch_values()
</span></span><span style="display:flex;"><span>  evens, odds <span style="color:#f92672">=</span> partition_values(id_list)
</span></span><span style="display:flex;"><span>  p_evens, p_odds <span style="color:#f92672">=</span> process_all_values(evens), process_all_values(odds)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Python `map` is lazy, so we force evaluation</span>
</span></span><span style="display:flex;"><span>  list(p_even)
</span></span><span style="display:flex;"><span>  list(p_odds)
</span></span></code></pre></div><p>While not yet optimal due to python limitations, we have already a more functional code. There are tons of enhancements we&rsquo;d be able to do here, such as using monadic algebraic types to wrap our mapped computations, allowing us to safely handle possible errors that happened during <code>process_value</code>.</p>
<p>Also, note that, while this slice of code is functional, it is only safe to do this <strong>as is</strong> if <code>process_value</code> is a pure function. Otherwise you&rsquo;ll have problems such as indefinite state if an exception is thrown during this process or you&rsquo;ll have to reprocess all the stuff.</p>
<p>Some other concepts help you deal with this kind of problem and are orthogonal to FP, such as idempotence. It is important to know that functional programming (or the functional programming philosophy) is only a tool that helps you write safer code.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>You&rsquo;ll find that code that follows the functional philosophy is easier to test, to parallelize, to reuse and to understand. This, of course, doesn&rsquo;t mean that FP is the silver bullet that will solve all programming problems. If that was the case, I wouldn&rsquo;t be advertising the usage of those practices on non-functional languages, but rather advocating the migration to FP languages. The true value here is that you have an alternative to traditional imperative code style, which can result in the aforementioned advantages</p>
<p>This post got longer than I initially though and is only scratching the surface of FP. I&rsquo;ll surely write more about FP on future posts and I&rsquo;ll always focus more on the philosophy and how can you think functionally, even if your current language doesn&rsquo;t fully implement functional idioms. There are tons of useful techniques that one can borrow from functional programming which makes code safer, cleaner and more expressive.</p>
<p>Feel free to write me if you agree, disagree or just want to have a beer with me. I still don&rsquo;t have comments on my blog and this is something I&rsquo;ll take care of on the next week.
:x</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/functional-programming/">Functional Programming</a></li>
      <li><a href="http://localhost:1313/tags/python/">Python</a></li>
      <li><a href="http://localhost:1313/tags/scala/">Scala</a></li>
      <li><a href="http://localhost:1313/tags/java/">Java</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Thoughts on Code</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
